"use strict";!function(){var a=angular.module("samplerApp",["ngRoute","samplerApp.controllers.dev","samplerApp.controllers.form","samplerApp.controllers.nav","samplerApp.directives"]);a.config(["$logProvider",function(a){a.debugEnabled(!1)}]),a.config(["$routeProvider",function(a){a.when("/",{templateUrl:"templates/partials/main.html"}).when("/dev",{templateUrl:"templates/partials/main.html",controller:"DevCtrl"}).when("/about",{templateUrl:"templates/partials/about.html"}).otherwise({redirectTo:"/"})}]),a.run(["$log",function(a){a.log("starting app"),a.debug("debug enabled")}])}(),function(){var a=angular.module("samplerApp.controllers.dev",[]);a.controller("DevCtrl",["$log","$route","$scope",function(a,b,c){var d={debug:!0,sampleCount:12,seed:"snowman: â˜ƒ",smallestItem:1,totalCount:1e3};angular.extend(c.form.input,d),c.form.submit()}])}(),function(){function a(a,b){return{message:a,related:b}}function b(a,b){var c=[],d=b.sampleCount,e=b.seed,f=b.smallestItem,g=b.totalCount,h=a(e,g,d,f,c),i=h[0],j=i.concat();return j.sort(function(a,b){return a-b}),{all:h[1],hashes:c,sorted:j,unique:i}}var c={integerRequired:"A whole number is required.",numberTooSmall:"The number must be bigger than zero.",sampleCountTooLarge:"The sample count must be smaller than the total count.",seedRequired:"A random seed is required.",positiveIntegerRequired:"A whole number bigger than zero is required."},d=angular.module("samplerApp.controllers.form",["samplerApp.services"]);d.controller("MainCtrl",["$log","$scope","$window","getSamplesUnique","leftPadder","spellsInt",function(d,e,f,g,h,i){function j(b){var d={};return b?d.value=b:d.error=a(c.seedRequired),d}function k(b){var d={},e=i(b);return isNaN(e)?d.error=a(c.integerRequired):d.value=e,d}function l(b){var d=k(b);return void 0!==d.error?d.error=a(c.positiveIntegerRequired):d.value<1&&(d.error=a(c.numberTooSmall)),d}function m(b){var d=l(b);return void 0===d.error&&void 0!==v.totalCount&&d.value>v.totalCount&&(d.error=a(c.sampleCountTooLarge,["totalCount"])),d}function n(a,b,c,d){u.allItems=a,u.uniqueItems=b,u.sortedItems=c,u.debug=d}function o(a){var b=s.errors,c=s.parsed,d=w[a],e=s.relatedErrors;s.showing=!1,n(),delete b[a];var f=e[a];if(void 0!==f){for(var g=0,h=f.length;h>g;g++)delete b[f[g]];delete e[a]}var i=d(s.input[a]);return c[a]=i.value,i.error}function p(a,b){var c=s.relatedErrors,d=o(b);if(void 0!==d){var e=d.message,f=d.related;if(s.errors[b]=e,void 0!==f)for(var g=0,h=f.length;h>g;g++){var i=f[g];void 0===c[i]&&(c[i]=[]),c[i].push(b)}a=!1}return a}function q(){var a=!0;return a=p(a,"seed"),a=p(a,"smallestItem"),a=p(a,"totalCount"),a=p(a,"sampleCount")}function r(a,b){var c,d,e,f,g,i,j=b.all,k=b.hashes,l=a.seed,m=a.smallestItem,n=a.totalCount;i=j.length,f=h(i.toString().length," "),g=h((n-1).toString().length," "),e=['Seed: "'+l+'"','      "'+encodeURI(l)+'" (url-encoded)',""];for(var o=0;i>o;o++)c=j[o]-m,d=f(o+1)+". "+k[o]+" % "+n+" = "+g(c),e.push(d);return e.join("\n")}var s,t,u,v,w;s={},u={},w={sampleCount:m,seed:j,smallestItem:k,totalCount:l},t={smallestItem:1},s.showing=!1,s.errors={},s.input=t,s.parsed={},s.relatedErrors={},v=s.parsed,o("smallestItem"),s.onInputChange=o,s.submit=function(){var a,c;q()&&(c=b(g,v),a=r(v,c),n(c.all,c.unique,c.sorted,a),s.showing=!0)},e.form=s,e.output=u,e.highestItem=function(){var a=v.smallestItem+v.totalCount-1;return("number"!=typeof a||isNaN(a))&&(a=""),a}}])}(),function(){var a=angular.module("samplerApp.controllers.nav",[]);a.controller("NavCtrl",["$log","$route","$scope",function(a,b,c){c.navButtonClass=function(a){var c=b&&b.current&&b.current.templateUrl;if(!c)return{};var d=c.split("/"),e=d[d.length-1];return{active:e===a}}}])}(),function(){var a=angular.module("samplerApp.directives",[]);a.directive("smpFormInput",[function(){return{restrict:"E",replace:"true",templateUrl:"templates/directives/form_input.html",scope:{form:"=formModel",inputId:"@",inputMin:"@",inputType:"@",key:"@",label:"@",placeholder:"@"}}}])}(),function(){var a=angular.module("samplerApp.services",[]);a.factory("spellsInt",[function(){function a(a){var b=parseInt(a,10);return isNaN(b)||b.toString()!==a.toString()?0/0:b}return a}]),a.factory("bigint",["$window",function(a){return a.BigInt}]),a.factory("getTests",["$http",function(a){function b(b){a.get("bower_components/rivest-sampler-tests/tests.json",{timeout:1e3}).success(function(a){b(a)}).error(function(a){throw"error: "+a})}return b}]),a.factory("sha256",[function(){function a(a){var b=new jsSHA(a,"TEXT"),c=b.getHash("SHA-256","HEX");return c}return a}]),a.factory("toBigInt",["bigint",function(a){function b(b){return b=b.toUpperCase(),a.str2bigInt(b,16,1)}return b}]),a.factory("bigMod",["bigint","toBigInt",function(a,b){function c(c,d){var e=b(c);return a.modInt(e,d)}return c}]),a.factory("getSample",["bigMod","sha256",function(a,b){function c(c,d,e,f){var g=b(c+","+e.toString()),h=a(g,d);if(isNaN(h))throw"drawing sample "+e+" from size "+d+' with seed "'+c+'" did not return a number';return void 0!==f&&f.push(g),h}return c}]),a.factory("getSamples",["getSample",function(a){function b(b,c,d,e,f){var g,h=[];void 0===e&&(e=1);for(var i=1;d>=i;i++)g=a(b,c,i,f)+e,h.push(g);return h}return b}]),a.factory("getSamplesUnique",["getSample",function(a){function b(b,c,d,e,f){var g,h=[],i=[],j={};void 0===e&&(e=1),d>c&&(d=c);for(var k=1,l=0;d>l;k++)g=a(b,c,k,f)+e,h.push(g),g in j||(j[g]=!0,i.push(g),l++);return[i,h]}return b}]),a.factory("leftPadder",[function(){function a(a,b){function c(a){return(d+a).slice(e)}var d,e;return d=new Array(a+1).join(b),e=-1*a,c}return a}])}();